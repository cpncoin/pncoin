/*
    radialIndicator.js v 1.0.1
    Author: Sudhanshu Yadav
    Copyright (c) 2015 Sudhanshu Yadav - ignitersworld.com , released under the MIT license.
    Demo on: ignitersworld.com/lab/radialIndicator.html
*/
!function(t,e,n){"use strict";function i(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,n,i){return e+e+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function r(t,e,n,i){return Math.round(n+(i-n)*t/e)}function a(t,e,n,a,o){var l=-1!=o.indexOf("#")?i(o):o.match(/\d+/g),u=-1!=a.indexOf("#")?i(a):a.match(/\d+/g),s=n-e,h=t-e;return l&&u?"rgb("+r(h,s,u[0],l[0])+","+r(h,s,u[1],l[1])+","+r(h,s,u[2],l[2])+")":null}function o(){for(var t=arguments,e=t[0],n=1,i=t.length;i>n;n++){var r=t[n];for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}function l(t){return function(e){if(!t)return e.toString();e=e||0;for(var n=e.toString().split("").reverse(),i=t.split("").reverse(),r=0,a=0,o=i.length;o>r&&n.length;r++)"#"==i[r]&&(a=r,i[r]=n.shift());return i.splice(a+1,i.lastIndexOf("#")-a,n.reverse().join("")),i.reverse().join("")}}function u(t,e){e=e||{},e=o({},s.defaults,e),this.indOption=e,"string"==typeof t&&(t=n.querySelector(t)),t.length&&(t=t[0]),this.container=t;var i=n.createElement("canvas");t.appendChild(i),this.canElm=i,this.ctx=i.getContext("2d"),this.current_value=e.initValue||e.minValue||0}function s(t,e){var n=new u(t,e);return n.init(),n}var h=2*Math.PI,c=Math.PI/2,f=function(){var t=n.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,a=i/r;return function(t,e,i){var r=i||n.createElement("canvas");return r.width=t*a,r.height=e*a,r.style.width=t+"px",r.style.height=e+"px",r.getContext("2d").setTransform(a,0,0,a,0,0),r}}();u.prototype={constructor:s,init:function(){var t=this.indOption,e=this.canElm,n=this.ctx,i=2*(t.radius+t.barWidth),r=i/2;return this.formatter="function"==typeof t.format?t.format:l(t.format),this.maxLength=t.percentage?4:this.formatter(t.maxValue).length,f(i,i,e),n.strokeStyle=t.barBgColor,n.lineWidth=t.barWidth,n.beginPath(),n.arc(r,r,t.radius,0,2*Math.PI),n.stroke(),this.imgData=n.getImageData(0,0,i,i),this.value(this.current_value),this},value:function(t){if(void 0===t||isNaN(t))return this.current_value;t=parseInt(t);var e=this.ctx,n=this.indOption,i=n.barColor,r=2*(n.radius+n.barWidth),o=n.minValue,l=n.maxValue,u=r/2;t=o>t?o:t>l?l:t;var s=Math.round(100*(t-o)/(l-o)*100)/100,f=n.percentage?s+"%":this.formatter(t);if(this.current_value=t,e.putImageData(this.imgData,0,0),"object"==typeof i)for(var d=Object.keys(i),m=1,v=d.length;v>m;m++){var g=d[m-1],p=d[m],x=i[g],b=i[p],y=t==g?x:t==p?b:t>g&&p>t?n.interpolate?a(t,g,p,x,b):b:!1;if(0!=y){i=y;break}}if(e.strokeStyle=i,n.roundCorner&&(e.lineCap="round"),e.beginPath(),e.arc(u,u,n.radius,-c,h*s/100-c,!1),e.stroke(),n.displayNumber){var C=e.font.split(" "),I=n.fontWeight,S=n.fontSize||r/(this.maxLength-(Math.floor(1.4*this.maxLength/4)-1));C=n.fontFamily||C[C.length-1],e.fillStyle=n.fontColor||i,e.font=I+" "+S+"px "+C,e.textAlign="center",e.textBaseline="middle",e.fillText(f,u,u)}return this},animate:function(t){var e=this.indOption,n=this.current_value||e.minValue,i=this,r=Math.ceil((e.maxValue-e.minValue)/(e.frameNum||(e.percentage?100:500))),a=n>t;return this.intvFunc&&clearInterval(this.intvFunc),this.intvFunc=setInterval(function(){if(!a&&n>=t||a&&t>=n){if(i.current_value==n)return void clearInterval(i.intvFunc);n=t}i.value(n),n!=t&&(n+=a?-r:r)},e.frameTime),this},option:function(t,e){return void 0===e?this.option[t]:(-1!=["radius","barWidth","barBgColor","format","maxValue","percentage"].indexOf(t)&&(this.indOption[t]=e,this.init().value(this.current_value)),void(this.indOption[t]=e))}},s.defaults={radius:50,barWidth:5,barBgColor:"#eeeeee",barColor:"#99CC33",format:null,frameTime:10,frameNum:null,fontColor:null,fontFamily:null,fontWeight:"bold",fontSize:null,interpolate:!0,percentage:!1,displayNumber:!0,roundCorner:!1,minValue:0,maxValue:100,initValue:0},e.radialIndicator=s,t&&(t.fn.radialIndicator=function(e){return this.each(function(){var n=s(this,e);t.data(this,"radialIndicator",n)})})}(window.jQuery,window,document,void 0);